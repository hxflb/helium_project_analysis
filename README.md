引    言\
Helium 是一个用于 Web 自动化的 Python 库，支持 Chrome 和 Firefox 浏览器。它通过提供更高级别的 API，简化了 Selenium 的复杂性，使 Web 自动化脚本更短、更易读，并且对网页变化更具稳定性。\
Helium 最初由 Michael Herrmann 在2013年为波兰 IT 初创公司 BugFree 软件开发。2019 年公司关闭后，开发者决定将 Helium 开源并现代化。\
本小组通过爬取该流行库的历史提交信息，对历史提交信息进行数据分析统计和可视化处理，并使用libcst等库实现程序静态与动态分析。最后对所有的分析进行总结归纳，以探索其中的规律。\
\
1  爬取历史提交信息\
本部分通过Python爬虫对项目历史提交信息进行爬取，包含提交内容，时间，项目内容等历史提交信息，部分结果示意如下图：

<img width="317" alt="爬取内容部分截图" src="https://github.com/user-attachments/assets/3336eedf-840f-4081-b3ff-11cf971f1e82" />

图1.1  项目历史提交信息\
\
2  对历史提交信息进行数据分析和可视化处理\
该部分通过python 的pandas、re、 nltk、wordcloud等库对爬取内容进行数据分析与可视化处理。\
2.1提交统计分析
提交统计图展示了不同贡献者对 Helium 项目的提交次数。\
Michael Herrmann 是最主要的贡献者，其提交次数远远超过其他贡献者，显示出他在项目中的主导作用。\
其他贡献者如 Diptesh Choudhuri、Bernardo Martins、Diego Molina 等也对项目有所贡献，但提交次数相对较少。\
该图表明项目主要由少数核心贡献者推动，社区参与度可能有限。\
总体来看，这三张图提供了 Helium 项目的历史提交活动的全面视图，从频繁讨论的主题、提交时间的分布到主要贡献者的活跃度。这些信息对于理解项目的发展历程和当前状态非常有用。
![submit_times](https://github.com/user-attachments/assets/9e7275de-7fd3-41df-a88f-c66fe01323b6)
图2.1  提交统计分析

2.2提交时间表分析
提交时间表图展示了从 2020 年到 2025 年 Helium 项目的提交活动。\
提交活动在 2020 年初期达到高峰，随后在 2021 年和 2022 年有几次显著的提交活动，但整体趋势是逐渐减少。\
2023 年和 2024 年的提交活动相对较少，但在 2024 年中期有一次显著的提交高峰。\
2025 年的提交活动再次减少，显示出项目可能处于维护阶段或活跃度降低。\
![Submission schedule](https://github.com/user-attachments/assets/eeee559b-a3eb-4977-b088-547f84cc7027)
图2.2提交时间表分析

2.3词云图分析
词云图展示了与 Helium 项目相关的最常见词汇。\
词汇的大小表示其在项目中出现的频率。较大的词汇如“update”、“readme”、“fix”、“version”、“development”表明这些是项目中频繁讨论或操作的主题。\
其他显著词汇包括“add”、“remove”、“improve”、“docs”（文档），这些词汇表明项目中经常进行的功能添加、移除、改进以及文档更新。\
词云图还显示了一些与编程和技术相关的术语，如“selenium”、“chromedriver”、“webdrivers”，这些是 Helium 项目中使用的关键技术和工具。\
![Most_mentioned](https://github.com/user-attachments/assets/015cc271-8d62-4b95-b668-2ea1751738f9)
图2.3词云图分析
\
3程序静态分析
3.1使用工具及分析方向

3.11分析工具: 
基于 `libcst`的自定义 Python 静态分析脚本\
3.12分析方向
本部分包含了对 `helium` 项目代码的各项静态分析结果，包括：
1.  导入语句分析: 记录每个文件中导入的模块和别名。
2.  函数定义分析: 记录每个文件中定义的函数名、参数以及是否包含文档字符串。
3.  函数调用分析: 记录每个函数中调用的其他函数及其参数。
4.  注释计数分析: 记录每个文件中的注释数量。
5.  变量分析: 记录在函数内部声明的变量及其值。
6.  控制流分析: 记录代码中的 `if`、 `for` 和 `while` 语句。
7.  类定义分析: 记录文件中定义的类名、方法和属性。

3.2详细分析结果

由于内容过多仅展示冰山一脚：
<img width="407" alt="静态分析" src="https://github.com/user-attachments/assets/1b7ce665-9981-479e-ab74-4a8e599d536a" />

图3.1静态分析部分展示

3.3总结
3.3.1内容总结
  核心 API：`helium\helium\__init__.py`  定义了 Helium 的核心 API， 包括浏览器控制、元素查找和操作等功能。\
  底层实现： `helium\helium\_impl` 目录包含 Helium 的底层实现，包括 Selenium 的包装、工具函数等。\
  辅助工具：`helium\helium\_impl\util` 目录下包含了多个工具模块， 例如处理几何对象的 `geom`， 处理html文本的`html`,  处理xpath的 `xpath`, 格式化参数的 `inspect_`等。\
  测试框架: `helium\tests` 目录包含了大量的测试代码，用于测试 helium 库的各个功能模块，并进行了分类测试，包括api测试和单元测试。\
  测试辅助工具:`helium\tests\api\util.py` 提供测试所需的工具函数，例如获取测试数据等。\
  测试框架：`helium\tests\api\__init__.py` 是整个测试模块的初始化文件。\
一致性:Helium 库的测试用例结构清晰，命名规范，且都有注释，方便阅读理解。\
3.3.2未来改进方向
  数据流分析： 我考虑加入数据流分析功能，以检测数据在程序中的流向，从而帮助发现潜在的错误。\
  更精细的代码检查: 考虑加入更多静态代码检查规则，例如 PEP8 代码规范检查等，提高代码质量。\
4程序动态分析
本部分记录了使用 `helium` 库执行单个测试用例的过程，目标是 Google 首页。\
4.1 测试设置和环境:
日志以测试用例的开始为标志。\
日志显示使用了 Selenium Manager 来管理 WebDriver 的下载和安装，并记录了 Selenium Manager 可执行文件的路径。管理器检测到需要 ChromeDriver 来运行 Chrome 浏览器，并找到了缓存的版本 \(132.0.6834.83)。浏览器和驱动程序的路径被识别。\
日志显示测试在 Windows 系统上运行。\
4.2. 浏览器启动和连接:
 Selenium Manager 启动了 ChromeDriver 进程（PID 10856）。
 日志记录了与 ChromeDriver 服务器（localhost:49942）建立连接的过程，包括发送请求和接收响应。这部分日志显示了浏览器会话的创建和初始化。  `POST /session` 请求创建了一个新的浏览器会话，服务器返回会话 ID (`ec535e916627c537e3dc4db4cb79c23a`)。
4.3 网页访问和标题检查
 测试用例使用 `go_to("https://www.google.com")` 访问 Google 首页。日志显示了发送 `POST /session/ ... /url` 请求来导航到指定 URL 的过程。\
 测试用例获取页面标题，并使用 `self.assertIn("Google", title)` 断言来检查标题是否包含 "Google"。日志显示了获取标题 (`GET /session/ ... /title`) 的过程以及服务器返回的标题 "Google"。\
4.4浏览器关闭
 测试用例执行完成后，`kill_browser()` 关闭了浏览器。日志显示了删除会话 (`DELETE /session/ ...`) 的过程。\
4.5  动态分析总结
浏览器驱动程序的管理:Selenium Manager 如何下载和管理 ChromeDriver。\
浏览器会话的创建和销毁: 浏览器会话的创建、URL 导航、标题获取以及会话的关闭。\
网络请求: 与 ChromeDriver 服务器之间的网络请求，以及请求的类型、URL 和响应状态码。

5.详细分工
陈思宇：爬取历史提交信息\
陶昱辰：对历史提交信息进行数据分析和可视化处理\
宋奕达：程序静态分析\
崔博皓：程序动态分析\
舒雨浩：对产出的文件、图片及文档进行具体分析总结并撰写文档

结    论

本研究通过Python爬虫技术成功爬取了Helium项目的历史提交信息，并利用数据分析和可视化工具对这些信息进行了深入分析。研究结果揭示了项目的关键动态和发展趋势，具体结论如下：\
项目贡献者分析：\
Michael Herrmann是Helium项目的主要贡献者，其提交次数远超其他贡献者，显示了他在项目中的领导作用。\
其他贡献者如Diptesh Choudhuri、Bernardo Martins和Diego Molina虽然也有所贡献，但相对较少，表明项目主要由少数核心贡献者推动，社区参与度有限。\
项目活跃度分析：\
从2020年到2025年，Helium项目的提交活动在2020年初达到高峰，之后逐渐减少，2024年中期有一次显著高峰，2025年再次减少，可能表明项目处于维护阶段或活跃度降低。\
项目主题分析：\
词云图分析显示，“update”、“readme”、“fix”、“version”和“development”是项目中频繁讨论或操作的主题，反映了项目中常见的活动和关注点。\
程序静态分析：\
静态分析揭示了Helium库的核心API、底层实现、辅助工具和测试框架的结构和功能。\
测试用例结构清晰，命名规范，且都有注释，显示了良好的代码质量和开发实践。\
未来改进方向包括加入数据流分析功能和更精细的代码检查，以提高代码质量和发现潜在错误。\
程序动态分析：\
动态分析记录了使用Helium库执行单个测试用例的过程，包括浏览器驱动程序的管理、浏览器会话的创建和销毁、网络请求等。\
分析结果表明，Helium库能够有效地管理浏览器驱动程序，创建和销毁浏览器会话，并进行网络请求。\
综上所述，本研究通过详细的数据分析和可视化处理，为理解Helium项目的发展历程、当前状态和未来改进方向提供了有价值的见解。这些结论不仅有助于项目维护者和贡献者优化项目开发和维护流程，也为类似项目的分析提供了参考。
